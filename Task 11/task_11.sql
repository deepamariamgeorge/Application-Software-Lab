USE LAB;
CREATE TABLE EMPLOY(
CODE VARCHAR(20),
NAME CHAR(20),
DOB DATE NOT NULL,
DESIGNATION CHAR(25),
SALARY INT
);
INSERT INTO EMPLOY VALUES ('E101','JEN','1989-09-21','SYSTEM ANALYST','80000');
INSERT INTO EMPLOY VALUES ('E105','PAM','1991-10-01','DEVELOPER','55000');
INSERT INTO EMPLOY VALUES ('E107','KATIE','1987-04-03','PROJECT MANAGER','74500');
INSERT INTO EMPLOY VALUES ('E110','PAUL','1994-12-06','TEAM LEAD','60000');
INSERT INTO EMPLOY VALUES ('E113','BROWN','1995-03-19','WEB DESIGNER','69000');

DELIMITER $$
CREATE TRIGGER INSERT_PREVENT
BEFORE INSERT
ON EMPLOY FOR EACH ROW
BEGIN
IF (CURRENT_TIME() BETWEEN '17:00' AND '00:00' ) THEN
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'NO CHANGES TO EMPLOY TABLE';
END IF;
END $$
DELIMITER ;

DELIMITER $$
CREATE TRIGGER UPDATE_PREVENT
BEFORE UPDATE
ON EMPLOY FOR EACH ROW
BEGIN
IF (CURRENT_TIME() BETWEEN '17:00' AND '00:00' ) THEN
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'NO CHANGES TO EMPLOY TABLE';
END IF;
END $$
DELIMITER ;

DELIMITER $$
CREATE TRIGGER DELETE_PREVENT
BEFORE DELETE
ON EMPLOY FOR EACH ROW
BEGIN
IF (CURRENT_TIME() BETWEEN '17:00' AND '00:00' ) THEN
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'NO CHANGES TO EMPLOY TABLE';
END IF;
END $$
DELIMITER ;
